{% extends "base.html" %}
{% block title %}{{ book.title }}{% endblock %}
{% block content %}
<div class="container" style="margin:60px auto;max-width:1000px;">
    <div style="display:flex;flex-wrap:wrap;gap:40px;align-items:flex-start;">
        <div style="flex:1;min-width:300px;">
            {% if book.cover_image %}
                <img src="{{ url_for('get_cover', book_id=book.id) }}" style="width:100%;max-width:400px;border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,.6);">
            {% else %}
                <div class="placeholder" style="width:100%;height:580px;font-size:7rem;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#7c3aed,#4c1d95);color:white;border-radius:16px;">
                    {{ book.title[:2]|upper }}
                </div>
            {% endif %}
        </div>
        <div style="flex:2;min-width:300px;">
            <h1 style="font-size:3rem;margin-bottom:8px;">{{ book.title }}</h1>
            <p style="font-size:1.6rem;color:#a78bfa;margin-bottom:20px;">by {{ book.author or 'Unknown Author' }}</p>
            <p style="font-size:1.1rem;margin-bottom:20px;">
                <strong>Category:</strong> {{ book.category }} • 
                <strong>Language:</strong> {{ book.language }} • 
                <strong>Downloads:</strong> {{ book.download_count }}
            </p>
            <div style="background:var(--card);padding:25px;border-radius:12px;margin:30px 0;line-height:1.8;font-size:1.1rem;">
                {{ book.description|default('No description available.', true)|replace('\n', '<br>')|safe }}
            </div>
            <button class="btn" onclick="openEmailModal('/download/{{ book.id }}')" style="padding:18px 40px;font-size:1.4rem;">
                Free Download
            </button>
            <a href="/" style="margin-left:20px;color:var(--muted);font-size:1.1rem;">← Back to Library</a>
        </div>
    </div>
</div>
{% endblock %}
